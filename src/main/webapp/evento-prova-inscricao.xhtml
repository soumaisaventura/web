<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" template="/template/main.xhtml">

	<ui:define name="meta-ogg">
		<meta property="og:title" content="Inscreva-se! #{raceHelper.getTitle(request)}" />
		<meta property="og:description" content="#{raceHelper.getDescription(request)}" />
		<meta property="og:image" content="#{applicationConfigHelper.getBaseUrl(request)}/api/event/#{param.slug}/banner" />
	</ui:define>

	<ui:define name="css">
		<link rel="stylesheet" href="#{request.contextPath}/css/jquery-ui.min.css" />
		<link rel="stylesheet" href="#{request.contextPath}/css/footable.core.min.css" />
		<style>
.footable-row-detail-name {
	padding-left: 46px;
}
</style>
	</ui:define>

	<ui:define name="lib">
		<script src="#{request.contextPath}/js/lib/mustache.min.js"></script>
		<script src="#{request.contextPath}/js/lib/jquery-ui.min.js"></script>
		<script src="#{request.contextPath}/js/lib/moment.min.js"></script>
		<script src="#{request.contextPath}/js/lib/numeral.min.js"></script>
		<script src="#{request.contextPath}/js/lib/pt-br.min.js"></script>
		<script src="#{request.contextPath}/js/lib/footable.min.js"></script>
		<script src="#{request.contextPath}/js/lib/bootbox.js"></script>
	</ui:define>

	<ui:define name="proxy">
		<script src="#{request.contextPath}/js/proxy/logon.js"></script>
		<script src="#{request.contextPath}/js/proxy/race-registration.js"></script>
		<script src="#{request.contextPath}/js/proxy/race.js"></script>
	</ui:define>

	<ui:define name="controller">
		<script src="#{request.contextPath}/js/controller/evento-prova-inscricao.js"></script>
	</ui:define>

	<ui:define name="breadcrumb">
		<ol class="breadcrumb">
			<li>
				<a href="#{request.contextPath}/calendario/#{eventHelper.getYear(request)}">Calendário #{eventHelper.getYear(request)}</a>
			</li>
			<li>
				<a href="#{request.contextPath}/evento/#{eventHelper.getSlug(request)}">#{eventHelper.getTitle(request)}</a>
			</li>
			<li class="active">Inscrição</li>
		</ol>
	</ui:define>

	<ui:define name="body">
		<form>
			<input id="event_id" type="hidden" value="#{param.evento_id}" />
			<input id="race_id" type="hidden" value="#{param.prova_id}" />

			<div id="summary-section" hidden="true">
				<div class="row" style="padding-bottom: 20px">
					<div class="form-group col-md-offset-3 col-md-6">
						<h2 id="race-name" class="race-name"></h2>
						<h4 class="hidden-xs">
							<span class="glyphicon glyphicon-calendar" style="font-size: 0.8em"></span> <span id="race-date"></span> &#160;&#160; <span
								class="glyphicon glyphicon-map-marker" style="font-size: 0.8em"></span> <span id="race-city"></span>
						</h4>
						<p id="race-description" class="text-justify"></p>
						<a id="event_link" href="#{request.contextPath}/evento/#{param.evento_id}">ver detalhes desta prova</a>
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-offset-3 col-md-6">
						<label for="categoryId">Categoria *</label>
						<select id="categoryId" class="form-control">
							<option disabled="disabled" selected="selected">Escolha a categoria</option>
						</select>
						<span id="categoryId-message" hidden="true" class="label label-danger" />
					</div>
				</div>
			</div>

			<div id="members-section" hidden="true">
				<div class="row">
					<div class="form-group col-md-offset-3 col-md-6">
						<label for="teamName">Nome da equipe *</label>
						<input type="text" id="teamName" class="form-control" maxlength="#{constants.nameSize}" placeholder="Digite o nome da equipe" />
						<span id="teamName-message" hidden="true" class="label label-danger" />
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-offset-3 col-md-6">
						<label>Equipe</label>
						<div>
							<table id="members-list" class="table footable toggle-arrow-small toggle-medium" style="margin-top: 0px; margin-bottom: 5px">
								<thead>
									<tr class="info text-primary">
										<th style="width: 30px;"></th>
										<th class="col-md-9">
											<small>atleta</small>
										</th>
										<th class="text-right col-md-2">
											<small>inscrição</small>
										</th>
									</tr>
								</thead>
								<tfoot>
									<tr>
										<th></th>
										<th class="text-right" nowrap='nowrap'>
											<span class="hidden-xs">total a pagar</span>
										</th>
										<th id="total" class="text-right" style="font-style: italic;" nowrap='nowrap'></th>
									</tr>
								</tfoot>
								<tbody></tbody>
							</table>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="form-group col-md-offset-3 col-md-6">
						<div id="members_ids-message" class="alert alert-danger" hidden="true"></div>
					</div>
				</div>

				<div id="pesquisa-atleta" class="row">
					<div class="form-group col-md-offset-3 col-md-6">
						<label>Pesquisa por atleta cadastrado</label>
						<input type="hidden" id="members-id" />
						<div class="input-group">
							<input type="text" id="members_ids" class="form-control" placeholder="Digite nome do atleta" maxlength="#{constants.nameSize}" />
							<span class="input-group-btn">
								<button id="bt-add-athlete" class="btn btn-primary" type="button">
									<span class="glyphicon glyphicon-plus" aria-hidden='true' style="font-size: 0.8em;"></span> Incluir <span class="hidden-xs">na equipe</span>
								</button>
							</span>
						</div>
					</div>
				</div>
			</div>

			<div id="submit-button-section" hidden="true">
				<div class="row" style="padding-top: 20px; padding-bottom: 20px">
					<div class="form-group col-md-offset-3 col-md-6">
						<p class="text-justify">* Campos de preenchimento obrigatório.</p>
					</div>
				</div>
				<div class="row" style="margin-bottom: 15px">
					<div class="form-group col-md-offset-3 col-md-6">
						<input id="facebook-appid" type="hidden" />
						<input id="registration-id" type="hidden" />
						<button type="submit" class="btn btn-lg btn-success pull-right col-xs-12 col-md-4">
							<span class="glyphicon glyphicon-pencil" aria-hidden='true' style="font-size: 0.8em;"></span> Inscrever
						</button>
					</div>
				</div>
			</div>
		</form>

		<script id="member-template" type="text/template">
			<tr id='member-{{id}}' data-raceprice='{{race_price}}'>
				<td>
					{{#deletable}}
					<a href='#' class='remove' data-id='{{id}}'>
						<span class='glyphicon glyphicon-trash' />
					</a>
					{{/deletable}}
				</td>
				<td class='footable-first-column' style='vertical-align: middle;'>
					<img class='img-rounded' src='{{picture.thumbnail}}' />
					&#160;&#160;&#160;{{name}}
				</td>
				<td class='ammount text-right' nowrap='nowrap' style='vertical-align: middle;' data-ammount='{{race_price}}'>{{formmated_race_price}}</td>
			</tr>
		</script>
	</ui:define>
</ui:composition>
